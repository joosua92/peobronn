function showAlert(e,t){var o=$("#alert-box");o.html(t),o.removeClass("alert-success"),o.removeClass("alert-info"),o.removeClass("alert-warning"),o.removeClass("alert-danger"),o.addClass("alert-"+e),o.show()}function onSignIn(e){var t="idToken="+e.getAuthResponse().id_token;$.post("input/google_login",t,function(e){var t=JSON.parse(e);"success"==t.loginStatus?window.location.href=t.redirect:"already in"==t.loginStatus?window.location.href=t.redirect:(showAlert(t.alertType,t.alertMessage),googleSignOut())})}function googleSignOut(){var e=gapi.auth2.getAuthInstance();e.signOut(),e.disconnect()}function onGoogleLoad(){gapi.load("auth2",function(){gapi.auth2.init()})}$(document).ready(function(){for(var e=document.getElementById("navbar").childNodes,t=0;t<e.length;t++)if("LI"==e[t].nodeName){var o=e[t].firstChild.getAttribute("href").split("/");o=o[o.length-1];var r=window.location.pathname.split("/");o==(r=r[r.length-1])&&e[t].setAttribute("class","active")}$('[data-toggle="tooltip"]').tooltip()}),$(document).ready(function(){$("#register-form").submit(function(e){e.preventDefault();var t=$("#register-form").serialize();t+="&ajax=true";$.post("input/register",t,function(e){var t=JSON.parse(e);showAlert(t.alertType,t.alertMessage)})}),$("#login-form").submit(function(e){e.preventDefault();var t=$("#login-form").serialize();t+="&ajax=true";$.post("input/login",t,function(e){var t=JSON.parse(e);t.hasOwnProperty("redirect")?window.location.href=t.redirect:showAlert(t.alertType,t.alertMessage)})}),$("#logout-form").submit(function(e){e.preventDefault();$.post("input/logout","ajax=true",function(e){var t=JSON.parse(e);"google"==t.logoutStatus?(googleSignOut(),window.location.href=t.redirect):window.location.href=t.redirect})}),$("#reserv-form").submit(function(e){e.preventDefault();var t=$("#reserv-form").serialize();t+="&ajax=true";$.post("input/reserv",t,function(e){var t=JSON.parse(e);showAlert(t.alertType,t.alertMessage)})}),$("#delete-user-form").submit(function(e){e.preventDefault();var t=$("#delete-user-form").serialize();t+="&ajax=true",$.post("input/delete_account",t,function(e){var t=JSON.parse(e);"google"==t.accountType&&"success"==t.alertType&&googleSignOut(),window.location.href=t.redirect})})}),$(document).ready(function(){var e=function(){location.reload()};$("#est-flag").click(function(){$.post("input/set_language/est",e)}),$("#eng-flag").click(function(){$.post("input/set_language/eng",e)})});